# Ring Spin Effect Generator

![logo](data/ref/ring_spin.png)

**English** | [中文](README-zh.md) 

## Introduction

I was struck by the `Die-cut collages` from artist [Charlie Elms](https://www.instagram.com/10.years.time/), especially [this series of distorted effects](https://www.instagram.com/p/DChFXFoKXKP), which caught my attention with its unique visual style. I decided to implement this visual effect in code so I could apply it to my own photos.

|              Distorted Statue of Liberty               |                       Distorted Building                       |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| <img src="data/ref/10.years.time-photo-DChFXFoKXKP-20251113_224627_467013838.jpg" width="300"> | <img src="data/ref/10.years.time-photo-DChFXFoKXKP-20251113_224627_467490645.jpg" width="300"> |

This project is a Python script that generates a "Ring Spin" visual effect for images. It divides an image into multiple concentric rings around a specified center point and rotates each ring by a different angle in an animation, creating a dynamic and cool visual effect.

The script supports various output formats, including:

*   **Static Image (JPG):** Saves the last frame of the animation.
*   **Animated GIF:** Generates a looping GIF animation.
*   **Video (MP4):** Creates an MP4 video with or without sound.
*   **Live Photo:** Generates a movable Live Photo for Apple devices, which can be transferred to an iPhone via AirDrop.

Additionally, you can add a looping sound effect to the video formats to make the effect more vivid.

## Screenshots

Here is an example of the effect generated by this project:

|                  Original Image                   |                  Effect (JPG)                  |                 Effect (GIF)                 |
| :-----------------------------------------: | :------------------------------------------: | :------------------------------------------: |
| <img src="data/in/chimney.jpg" width="300"> | <img src="data/ref/chimney.jpg" width="300"> | <img src="data/ref/chimney.gif" width="300"> |

## Dependencies

Before running this project, please ensure you have the following dependencies installed:

*   Python 3.x
*   NumPy
*   Pillow (PIL)
*   OpenCV for Python (`opencv-python`)
*   **FFmpeg:** Must be installed on your system and its path added to the system's environment variables.

**Optional Dependencies:**

*   `pillow-heif`: Required for processing HEIC format images.
*   `makelive`: Required for generating Live Photos.

You can install the required Python libraries using pip:

```bash
pip install numpy pillow opencv-python pillow-heif makelive
```


## Usage

### 1. As a Python Library

You can import the `ring_spin` function into your own Python script:

```python
from ring_spin import ring_spin

ring_spin(
    image_path="data/in/chimney.jpg",
    center_rel_pos=(0.5, 0.5),
    num_rings=8,
    ring_width=100,
    rotate_angles=,
    num_steps=10,
    audio_path="data/in/click.wav",
    duration_in_sec=3.0,
    output_dir="data/out",
    output_name="my_effect",
    output_formats=["jpg", "gif", "mp4", "live"]
)
```

### 2. Via Command Line

You can also run this script directly from the command line and pass in custom parameters.

```bash
python ring_spin.py [image_path] [options]
```

**Command-Line Arguments:**

*   `image_path`: (Required) Path to the input image.
*   `--center_rel_pos`: Relative coordinates of the center (default: 0.5 0.5).
*   `--num-rings`: Number of rings (default: 8).
*   `--ring-width`: Width of each ring in pixels (default: 100).
*   `--rotate-angles`: A list of rotation angles for each ring (default: 10 20 30 40 40 30 20 10).
*   `--num_steps`: Number of animation steps (default: 10).
*   `--audio-path`: Path to the audio file to be added to the video.
*   `--duration_in_sec`: Total duration of the animation in seconds (default: 3.0).
*   `--output-dir`: Output directory (default: data/out).
*   `--output-name`: Base name for the output files (default: same as the input file name).
*   `--output-formats`: List of output formats (default: jpg gif mp4 live).

## Examples

**Basic Example:**
Generate a JPG effect image and an MP4 video.

```bash
python ring_spin.py data/in/chimney.jpg --output-dir data/out --output-formats jpg mp4
```

**Advanced Example:**
Customize the number of rings, width, and add a sound effect to the generated video.

```bash
python ring_spin.py data/in/tree.HEIC \
    --num-rings 10 \
    --ring-width 80 \
    --rotate-angles 5 10 15 20 25 25 20 15 10 5 \
    --audio-path data/in/click.wav \
    --output-formats mp4 gif
```

## License

MIT